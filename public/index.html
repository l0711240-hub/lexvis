<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LexVis — 법령 열람 & 판례 해석 보조</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600;700&family=Noto+Sans+KR:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/home.css">
<link rel="stylesheet" href="/css/viewer.css">
</head>
<body>

<!-- ═══ 법령 팝업 모달 ═══ -->
<div class="modal-overlay" id="lawModal" onclick="closeLawModal(event)" role="dialog" aria-modal="true">
  <div class="modal-box">
    <header class="modal-hdr">
      <div>
        <div class="modal-title" id="lmTitle"></div>
        <div class="modal-sub" id="lmSub"></div>
      </div>
      <button class="icon-btn" onclick="document.getElementById('lawModal').classList.remove('show')" aria-label="닫기">✕</button>
    </header>
    <div class="modal-body" id="lmBody"></div>
    <footer class="modal-ftr">
      <span class="modal-ref" id="lmRef"></span>
      <button class="btn-primary" style="padding:7px 16px;font-size:12px;" id="lmGoBtn">해당 법령으로 이동 →</button>
    </footer>
  </div>
</div>

<!-- ═══ 용어 편집 모달 ═══ -->
<div class="modal-overlay" id="termEditModal" onclick="closeTermEdit(event)" role="dialog" aria-modal="true">
  <div class="modal-box" style="max-width:520px;">
    <header class="modal-hdr">
      <h3 style="font-size:14px;font-weight:600;">⊞ 용어 사전 편집</h3>
      <button class="icon-btn" onclick="document.getElementById('termEditModal').classList.remove('show')" aria-label="닫기">✕</button>
    </header>
    <div class="modal-body">
      <div style="margin-bottom:14px;">
        <div class="form-label">새 용어 추가</div>
        <div class="form-row">
          <input class="form-input" id="nWord"  placeholder="용어">
          <input class="form-input" id="nHanja" placeholder="한자/영문">
        </div>
        <textarea class="form-input" id="nDef" placeholder="정의 및 설명"
                  style="width:100%;resize:vertical;min-height:60px;margin-bottom:7px;"></textarea>
        <div class="form-row">
          <button class="btn-primary" style="padding:7px 14px;font-size:12px;margin-left:auto;" onclick="submitAddTerm()">+ 추가</button>
        </div>
      </div>
      <div class="form-label">등록된 용어 <span id="termCount" style="color:var(--accent);font-family:var(--font-mono);"></span></div>
      <div id="termList"></div>
    </div>
  </div>
</div>

<!-- ═══ HOME 페이지 ═══ -->
<div class="page active" id="home">
  <nav class="home-nav" role="navigation">
    <div class="logo" onclick="goHome()">Lex<span>Vis</span></div>
    <div class="nav-links">
      <a onclick="goSub('cases')">판례 검색</a>
      <a onclick="goSub('laws')">법령 DB</a>
      <a onclick="goSub('guide')">가이드</a>
    </div>
    <div class="nav-right">
      <button class="icon-btn" onclick="toggleTheme()" title="테마 전환" aria-label="테마 전환">☀</button>
      <button class="btn-primary" onclick="goSub('cases')">법률 & 판례 열람 →</button>
    </div>
  </nav>

  <main class="hero">
    <section class="ain">
      <div class="hero-eyebrow">법령 열람 & 판례 해석 보조</div>
      <h1 class="hero-title">복잡한 법률,<br>이제 <em>명확하게</em><br>읽힙니다</h1>
      <p class="hero-desc">판례 원문을 읽으며 법률 용어를 즉시 해설받고,<br>상·하급심 연계 판례를 한눈에 탐색하세요.</p>
      <button class="btn-primary" onclick="goSub('cases')">법률 & 판례 열람 →</button>
    </section>
    <section class="ain" style="animation-delay:.12s;">
      <div class="hero-search-panel">
        <div class="stype-tabs" role="tablist">
          <button class="stype-btn active" id="ht-all"  onclick="hTab('all')" role="tab">전체</button>
          <button class="stype-btn"        id="ht-case" onclick="hTab('case')" role="tab">판례</button>
          <button class="stype-btn"        id="ht-law"  onclick="hTab('law')" role="tab">법령</button>
        </div>
        <div class="search-bar-wrap">
          <span class="search-icon">⌕</span>
          <input id="hSrch" placeholder="판례번호, 법령명, 키워드 검색..."
                 onkeydown="if(event.key==='Enter')doHomeSearch()" aria-label="검색">
          <button class="go-btn" onclick="doHomeSearch()">검색</button>
        </div>
        <div id="homeResults"><div class="hint-text">검색어를 입력하세요</div></div>
      </div>
    </section>
  </main>

  <section class="features">
    <div class="slabel">주요 기능</div>
    <div class="feature-grid">
      <article class="feature-card">
        <div class="ficon">◑</div>
        <div class="ftitle">다크·라이트 모드</div>
        <div class="fdesc">눈의 피로를 줄이는 다크모드와 인쇄 친화적 라이트모드 즉시 전환.</div>
      </article>
      <article class="feature-card">
        <div class="ficon">⊞</div>
        <div class="ftitle">용어 자동 감지·해설</div>
        <div class="fdesc">본문 내 법률 용어 자동 감지, 사전 직접 편집 가능.</div>
      </article>
      <article class="feature-card">
        <div class="ficon">⇅</div>
        <div class="ftitle">법령·판례 다이렉팅</div>
        <div class="fdesc">본문 속 법령·판례 참조를 클릭 한 번으로 바로 이동.</div>
      </article>
    </div>
  </section>
</div>

<!-- ═══ SUB 페이지 ═══ -->
<div class="page" id="subpage">
  <nav class="sub-nav" role="navigation">
    <div class="tbl">
      <div class="tlogo" onclick="goHome()">LexVis</div>
      <div class="tdiv"></div>
      <div class="nav-links">
        <a id="sn-cases" onclick="goSub('cases')">판례 검색</a>
        <a id="sn-laws"  onclick="goSub('laws')">법령 DB</a>
        <a id="sn-guide" onclick="goSub('guide')">가이드</a>
      </div>
    </div>
    <button class="icon-btn" onclick="toggleTheme()" aria-label="테마 전환">☀</button>
  </nav>
  <main id="subContent"></main>
</div>

<!-- ═══ DETAIL 뷰어 ═══ -->
<div class="page" id="detail">
  <div class="reading-progress" id="readingProgress"></div>
  <header class="detail-topbar">
    <div class="tbl">
      <div class="tlogo" onclick="goHome()">LexVis</div>
      <div class="tdiv"></div>
      <div class="tcase" id="dNum">—</div>
      <span class="chip chip-g" id="dChip1"></span>
      <span class="chip chip-b" id="dChip2"></span>
    </div>
    <div class="tbr">
      <div class="inline-search">
        <span style="color:var(--text-dim);font-size:12px;">⌕</span>
        <input id="iSrch" type="text" placeholder="본문 검색..."
               oninput="doInlineSearch()"
               onkeydown="if(event.key==='Enter')nextMatch()" aria-label="본문 검색">
        <button class="sn" onclick="prevMatch()" title="이전" aria-label="이전">↑</button>
        <span class="sc" id="iCnt"></span>
        <button class="sn" onclick="nextMatch()" title="다음" aria-label="다음">↓</button>
      </div>
      <button class="icon-btn" onclick="history.back()" title="뒤로" aria-label="뒤로" style="font-size:16px;">←</button>
      <button class="icon-btn" onclick="history.forward()" title="앞으로" aria-label="앞으로" style="font-size:16px;">→</button>
      <button class="icon-btn" onclick="toggleTheme()" aria-label="테마 전환">☀</button>
      <button class="icon-btn" onclick="goHome()" aria-label="닫기">✕</button>
    </div>
  </header>

  <div class="detail-body">
    <!-- 좌측 TOC -->
    <aside class="panel-left" id="panelLeft" role="navigation" aria-label="목차"></aside>

    <!-- 중앙 본문 -->
    <main class="panel-center" id="panelCenter" onscroll="updateProgress()">
      <div class="viewer-toolbar">
        <button class="tbtn active" id="bDark"  onclick="setMode('dark')">◑ 다크</button>
        <button class="tbtn"        id="bLight" onclick="setMode('light')">◯ 라이트</button>
        <div class="tsep"></div>
        <div class="fctl">
          <span style="font-size:12px;">가</span>
          <input type="range" min="13" max="22" value="15" id="fontSizeRange" oninput="setFontSize(this.value)" aria-label="글자 크기">
          <span style="font-size:18px;">가</span>
        </div>
        <div class="tsep"></div>
        <button class="tbtn" onclick="applyHighlight()">◈ 하이라이트</button>
        <button class="tbtn" onclick="clearHighlights()">↺ 지우기</button>
        <div class="tsep"></div>
        <button class="tbtn active" id="btnTermToggle" onclick="toggleTermLayer()">법률 용어: 켬</button>
      </div>
      <div id="caseBody">
        <div class="loading-wrap"><div class="spinner"></div></div>
      </div>
    </main>

    <!-- 우측 패널 -->
    <aside class="panel-right" id="panelRight">
      <div class="panel-tabs" id="panelTabs">
        <div class="ptab active" id="pt-terms" onclick="showTab('terms')">용어 해설</div>
      </div>
      <div class="pc" id="pc-terms">
        <div class="hint" id="termHint">
          본문의 <strong style="color:var(--accent);">밑줄 용어</strong>를 클릭하면 해설이 표시됩니다.
        </div>
        <div id="termDetail"></div>
        <div class="rst" style="margin-top:8px;">이 문서의 주요 용어</div>
        <div id="autoTerms"></div>
        <div style="margin-top:10px;padding-top:10px;border-top:1px solid var(--border);">
          <button class="tbtn" style="width:100%;" onclick="openTermEdit()">⊞ 용어 사전 편집</button>
        </div>
      </div>
      <div class="pc" id="pc-related" style="display:none;">
        <div id="relatedContent"><div class="hint">연계 판례 정보를 불러옵니다...</div></div>
      </div>
    </aside>
  </div>
</div>

<script type="module" src="/js/app.js"></script>
</body>
</html>
