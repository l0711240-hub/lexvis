<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LexVis — 법률 열람 & 판례 해석 보조</title>
<style>html,body{font-family:'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic',sans-serif;}</style>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600;700&family=Noto+Sans+KR:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/home.css">
<link rel="stylesheet" href="/css/viewer.css">
</head>
<body>

<!-- 법령 팝업 -->
<div class="modal-overlay" id="lawModal" onclick="closeLawModal(event)">
  <div class="modal-box">
    <div class="modal-hdr">
      <div>
        <div class="modal-title" id="lmTitle"></div>
        <div class="modal-sub" id="lmSub"></div>
      </div>
      <button class="icon-btn" onclick="document.getElementById('lawModal').classList.remove('show')">✕</button>
    </div>
    <div class="modal-body" id="lmBody"></div>
    <div class="modal-ftr">
      <span class="modal-ref" id="lmRef"></span>
      <button class="btn-primary" style="padding:7px 16px;font-size:12px;" id="lmGoBtn">해당 법률로 이동 →</button>
    </div>
  </div>
</div>

<!-- 용어 편집 팝업 -->
<div class="modal-overlay" id="termEditModal" onclick="closeTermEdit(event)">
  <div class="modal-box" style="max-width:520px;">
    <div class="modal-hdr">
      <h3 style="font-size:14px;font-weight:600;">⊞ 용어 사전 편집</h3>
      <button class="icon-btn" onclick="document.getElementById('termEditModal').classList.remove('show')">✕</button>
    </div>
    <div class="modal-body">
      <div style="margin-bottom:14px;">
        <div class="form-label">새 용어 추가</div>
        <div class="form-row">
          <input class="form-input" id="nWord" placeholder="용어">
          <input class="form-input" id="nHanja" placeholder="한자/영문">
        </div>
        <textarea class="form-input" id="nDef" placeholder="정의 및 설명" style="width:100%;resize:vertical;min-height:60px;margin-bottom:7px;"></textarea>
        <div class="form-row">
          <input class="form-input" id="nLaw" placeholder="관련 법령">
          <button class="btn-primary" style="padding:7px 14px;font-size:12px;" onclick="submitAddTerm()">+ 추가</button>
        </div>
      </div>
      <div class="form-label">등록된 용어 <span id="termCount" style="color:var(--accent);font-family:var(--font-mono);"></span></div>
      <div id="termList"></div>
    </div>
  </div>
</div>

<!-- HOME -->
<div class="page active" id="home">
  <nav class="home-nav">
    <div class="logo" onclick="goHome()">Lex<span>Vis</span></div>
    <div class="nav-links">
      <a onclick="goSub('cases')">판례 검색</a>
      <a onclick="goSub('laws')">법령 데이터베이스</a>
      <a onclick="goSub('guide')">가이드</a>
    </div>
    <div class="nav-right">
      <div class="icon-btn" onclick="toggleTheme()" title="테마 전환">☀</div>
      <button class="btn-primary" onclick="goSub('cases')">법률 &amp; 판례 체험하기 →</button>
    </div>
  </nav>
  <section class="hero">
    <div class="ain">
      <div class="hero-eyebrow">법률 열람 & 판례 해석 보조</div>
      <h1 class="hero-title">복잡한 법률,<br>이제 <em>명확하게</em><br>읽힙니다</h1>
      <p class="hero-desc">판례 원문을 읽으며 법률 용어를 즉시 해설받고,<br>상·하급심 연계 판례를 한눈에 탐색하세요.</p>
      <button class="btn-primary" onclick="goSub('cases')">법률 &amp; 판례 체험하기 →</button>
    </div>
    <div class="ain" style="animation-delay:.12s;">
      <div class="hero-search-panel">
        <div class="stype-tabs">
          <button class="stype-btn active" id="ht-all"  onclick="hTab('all')">전체</button>
          <button class="stype-btn"        id="ht-case" onclick="hTab('case')">판례</button>
          <button class="stype-btn"        id="ht-law"  onclick="hTab('law')">법률</button>
        </div>
        <div class="search-bar-wrap">
          <span class="search-icon">⌕</span>
          <input id="hSrch" placeholder="판례번호, 법령명, 키워드 검색..."
                 onkeydown="if(event.key==='Enter')doHomeSearch()">
          <button class="go-btn" onclick="doHomeSearch()">검색</button>
        </div>
        <div id="homeResults"><div class="hint-text">검색어를 입력하세요</div></div>
      </div>
    </div>
  </section>
  <section class="features">
    <div class="slabel">주요 기능</div>
    <div class="feature-grid">
      <div class="feature-card"><div class="ficon">◑</div><div class="ftitle">3가지 열람 모드</div><div class="fdesc">다크·라이트·코딩 모드 즉시 전환.</div></div>
      <div class="feature-card"><div class="ficon">⊞</div><div class="ftitle">용어 자동 감지·해설</div><div class="fdesc">본문 내 법률 용어 자동 감지, 사전 직접 편집 가능.</div></div>
      <div class="feature-card"><div class="ficon">⇅</div><div class="ftitle">상·하급심 연계</div><div class="fdesc">국가법령정보 API 실시간 연동, 연계 판례 이동.</div></div>
    </div>
  </section>
</div>

<!-- SUBPAGE -->
<div class="page" id="subpage">
  <nav class="sub-nav">
    <div class="tbl">
      <div class="tlogo" onclick="goHome()">LexVis</div>
      <div class="tdiv"></div>
      <div class="nav-links">
        <a id="sn-cases" onclick="goSub('cases')">판례 검색</a>
        <a id="sn-laws"  onclick="goSub('laws')">법령 데이터베이스</a>
        <a id="sn-guide" onclick="goSub('guide')">가이드</a>
      </div>
    </div>
    <div class="icon-btn" onclick="toggleTheme()">☀</div>
  </nav>
  <div id="subContent"></div>
</div>

<!-- DETAIL -->
<div class="page" id="detail">
  <div class="reading-progress" id="readingProgress"></div>
  <div class="detail-topbar">
    <div class="tbl">
      <div class="tlogo" onclick="goHome()">LexVis</div>
      <div class="tdiv"></div>
      <div class="tcase" id="dNum">—</div>
      <span class="chip chip-g" id="dChip1"></span>
      <span class="chip chip-b" id="dChip2"></span>
    </div>
    <div class="tbr">
      <!-- ★ 핵심: ID와 함수명을 app.js 원본과 완전히 일치시킴 -->
      <div class="inline-search">
        <span style="color:var(--text-dim);font-size:12px;">⌕</span>
        <input id="iSrch" type="text" placeholder="본문 검색..."
               oninput="doInlineSearch()"
               onkeydown="if(event.key==='Enter')nextMatch()">
        <button class="sn" onclick="prevMatch()" title="이전">↑</button>
        <span class="sc" id="iCnt"></span>
        <button class="sn" onclick="nextMatch()" title="다음">↓</button>
      </div>
      <!-- ★ 뒤로/앞으로 버튼 -->
      <button class="icon-btn" onclick="history.back()"    title="뒤로가기" style="font-size:16px;">←</button>
      <button class="icon-btn" onclick="history.forward()" title="앞으로가기" style="font-size:16px;">→</button>
      <div class="icon-btn" onclick="toggleTheme()">☀</div>
      <div class="icon-btn" onclick="goHome()">✕</div>
    </div>
  </div>
  <div class="detail-body">
    <!-- 좌측 TOC -->
    <div class="panel-left" id="panelLeft"></div>
    <!-- 중앙 본문 -->
    <div class="panel-center" id="panelCenter" onscroll="updateProgress()">
      <div class="viewer-toolbar">
        <button class="tbtn active" id="bDark"  onclick="setMode('dark')">◑ 다크</button>
        <button class="tbtn"        id="bLight" onclick="setMode('light')">◯ 라이트</button>
        <div class="tsep"></div>
        <div class="fctl">
          <span style="font-size:12px;">가</span>
          <input type="range" min="13" max="20" value="15" oninput="setFontSize(this.value)">
          <span style="font-size:16px;">가</span>
        </div>
        <div class="tsep"></div>
        <button class="tbtn" onclick="applyHighlight()">◈ 하이라이트</button>
        <button class="tbtn" onclick="clearHighlights()">↺ 지우기</button>
        <div class="tsep"></div>
        <button class="tbtn active" id="btnTermToggle" onclick="toggleViewLayer('terms')">법률 용어: 켬</button>
      </div>
      <div id="caseBody">
        <div class="loading-wrap">
          <div class="spinner"></div>
          <span style="margin-left:10px;color:var(--text-muted);">불러오는 중...</span>
        </div>
      </div>
    </div>
    <!-- 우측 패널 -->
    <div class="panel-right">
      <div class="panel-tabs">
        <div class="ptab active" id="pt-terms"   onclick="showTab('terms')">용어 해설</div>
        <div class="ptab"        id="pt-related" onclick="showTab('related')">연계 판례</div>
      </div>
      <div class="pc" id="pc-terms">
        <div class="hint" id="termHint">
          본문의 <strong style="color:var(--accent);">밑줄된 법률 용어</strong>를 클릭하면 여기에 해설이 표시됩니다.
        </div>
        <div id="termDetail"></div>
        <div class="rst" style="margin-top:8px;">이 문서의 주요 용어</div>
        <div id="autoTerms"></div>
        <div style="margin-top:10px;padding-top:10px;border-top:1px solid var(--border);">
          <button class="tbtn" style="width:100%;" onclick="openTermEdit()">⊞ 용어 사전 편집</button>
        </div>
      </div>
      <div class="pc" id="pc-related" style="display:none;">
        <div id="relatedContent"><div class="hint">연계 판례 정보를 불러옵니다...</div></div>
      </div>
    </div>
  </div>
</div>

<script type="module" src="/js/app.js"></script>
</body>
</html>
