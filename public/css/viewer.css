/* public/css/viewer.css — LexVis 4.0 */

/* ════════════════════════════════════════════════════════════════
   뷰어 레이아웃
   ════════════════════════════════════════════════════════════════ */
.reading-progress {
  height:2px; background:var(--accent); width:0%;
  transition:width .1s; position:fixed; top:0; left:0; z-index:200;
}
.detail-topbar {
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 20px; background:var(--surface); border-bottom:1px solid var(--border);
  flex-shrink:0; gap:12px; position:sticky; top:0; z-index:150;
}
.tcase { font-size:14px; font-weight:600; font-family:var(--font-mono); }
.tbr { display:flex; align-items:center; gap:8px; }

.inline-search {
  display:flex; align-items:center; background:var(--surface2);
  border:1px solid var(--border); border-radius:var(--radius);
  padding:0 8px; gap:4px; transition:border-color .2s;
}
.inline-search:focus-within { border-color:var(--accent); }
.inline-search input {
  background:transparent; border:none; outline:none;
  color:var(--text); font-size:13px; padding:5px 4px; width:140px;
}
.sn {
  background:none; border:none; cursor:pointer;
  color:var(--text-muted); font-size:12px; padding:2px 4px; transition:color .15s;
}
.sn:hover { color:var(--accent); }
.sc { font-size:11px; color:var(--text-muted); font-family:var(--font-mono); min-width:36px; text-align:center; }

/* 3단 레이아웃 */
.detail-body { display:flex; flex:1; overflow:hidden; height:calc(100vh - 53px); }

.panel-left {
  width:220px; flex-shrink:0; overflow-y:auto;
  border-right:1px solid var(--border); background:var(--surface); padding:12px 0;
}
.panel-center {
  flex:1; overflow-y:auto; padding:0; display:flex; flex-direction:column;
}
.panel-right {
  width:260px; flex-shrink:0; border-left:1px solid var(--border);
  background:var(--surface); overflow-y:auto; display:flex; flex-direction:column;
}

/* ════════════════════════════════════════════════════════════════
   뷰어 툴바
   ════════════════════════════════════════════════════════════════ */
.viewer-toolbar {
  display:flex; align-items:center; gap:8px; padding:8px 20px;
  background:var(--surface); border-bottom:1px solid var(--border);
  flex-shrink:0; flex-wrap:wrap;
}
.tbtn {
  padding:5px 12px; background:transparent; border:1px solid var(--border);
  border-radius:var(--radius); color:var(--text-muted); font-size:12px;
  cursor:pointer; font-family:var(--font-sans); transition:all .15s;
}
.tbtn:hover { border-color:var(--accent); color:var(--accent); }
.tbtn.active { background:var(--accent-dim); border-color:var(--accent); color:var(--accent); }
.tsep { width:1px; height:18px; background:var(--border); }
.fctl { display:flex; align-items:center; gap:6px; color:var(--text-muted); }
.fctl input[type=range] { width:80px; accent-color:var(--accent); }

/* ════════════════════════════════════════════════════════════════
   목차 (TOC)
   ════════════════════════════════════════════════════════════════ */
.pst {
  font-size:10px; text-transform:uppercase; letter-spacing:.08em;
  color:var(--text-dim); padding:0 14px; margin:10px 0 4px;
}
.tdivider { height:1px; background:var(--border); margin:8px 14px; }
.toc {
  padding:6px 14px; font-size:12px; color:var(--text-muted); cursor:pointer;
  border-left:3px solid transparent; transition:all .15s; line-height:1.4;
}
.toc:hover { background:var(--surface2); color:var(--text); }
.toc.active { border-left-color:var(--accent); color:var(--accent) !important; background:var(--accent-glow); font-weight:600; }

.toc-part { color:var(--blue) !important; font-size:13px !important; }
.toc-chapter { color:var(--accent) !important; }
.toc-section { color:var(--text) !important; font-size:11.5px !important; }
.toc-subsection { color:var(--text-muted) !important; font-size:11px !important; }
.toc-preamble { font-style:italic; opacity:.8; }
.toc-art-title { opacity:.8; font-size:.95em; color:var(--accent); }
.toc-case-section { color:var(--text) !important; }

.toc-info { padding:4px 14px; font-size:11px; color:var(--text-muted); display:flex; gap:6px; }
.ml { color:var(--text-dim); min-width:32px; }

.case-type-badge {
  margin:4px 14px 8px; padding:3px 10px; border-radius:10px;
  font-size:11px; font-family:var(--font-mono); display:inline-block;
}
.case-type-badge.criminal { background:rgba(224,92,92,.15); color:#e05c5c; border:1px solid #e05c5c; }
.case-type-badge.civil { background:var(--blue-dim); color:var(--blue); border:1px solid var(--blue); }
.case-type-badge.const { background:rgba(160,125,224,.15); color:#a07de0; border:1px solid #a07de0; }
.case-type-badge.family { background:rgba(92,200,120,.15); color:#5cc878; border:1px solid #5cc878; }
.case-type-badge.admin { background:var(--accent-dim); color:var(--accent); border:1px solid var(--accent); }
.case-type-badge.default { background:var(--surface2); color:var(--text-muted); border:1px solid var(--border); }

/* ════════════════════════════════════════════════════════════════
   판례/법령 본문
   ════════════════════════════════════════════════════════════════ */
#caseBody { padding:32px 48px; flex:1; }

.case-hd { margin-bottom:32px; }
.case-court-badge {
  display:inline-block; padding:3px 10px; background:var(--accent-dim);
  color:var(--accent); border:1px solid var(--accent); border-radius:10px;
  font-size:11px; font-family:var(--font-mono); margin-bottom:10px;
}
.case-title {
  font-family:var(--font-serif); font-size:clamp(1.4rem,3vw,2rem);
  font-weight:700; line-height:1.25; margin-bottom:12px;
}
.case-meta { display:flex; gap:16px; flex-wrap:wrap; }
.mi { font-size:12px; color:var(--text-muted); display:flex; gap:6px; align-items:center; }
.mi .ml { color:var(--text-dim); }

/* 판례 섹션 */
.ls { margin-bottom:28px; padding-bottom:28px; border-bottom:1px solid var(--border); }
.ls:last-child { border-bottom:none; }
.lt {
  font-family:var(--font-mono); font-size:11px; text-transform:uppercase;
  letter-spacing:.06em; color:var(--accent); margin-bottom:12px;
}
.lbody { font-family:var(--font-serif); font-size:15px; line-height:2; color:var(--text); }

.ft-section-anchor {
  display:block; font-weight:700; color:var(--accent);
  margin:20px 0 6px; font-family:var(--font-sans); font-size:14px;
}

/* ── 법령 참조 링크 (파란색) ── */
.law-ref {
  color:var(--blue); cursor:pointer; text-decoration:underline;
  text-decoration-color:rgba(91,141,238,.4); transition:color .15s;
}
.law-ref:hover { color:var(--accent); }

/* ── [개선] 판례 참조 링크 (초록색) ── */
.case-ref {
  color:var(--green); cursor:pointer; text-decoration:underline;
  text-decoration-color:rgba(92,200,120,.4); transition:color .15s;
}
.case-ref:hover { color:var(--accent); }

/* ── [개선] 법령 내부 조문 참조 (연한 파란색, 밑줄 점선) ── */
.internal-ref {
  color:var(--blue); cursor:pointer;
  border-bottom:1px dotted var(--blue); transition:color .15s;
}
.internal-ref:hover { color:var(--accent); border-bottom-color:var(--accent); }

/* ── [개선] 조문 플래시 하이라이트 ── */
@keyframes flashHL {
  0% { background:var(--accent-dim); }
  100% { background:transparent; }
}
.flash-highlight {
  animation:flashHL 2s ease-out;
}

/* ════════════════════════════════════════════════════════════════
   법령 본문
   ════════════════════════════════════════════════════════════════ */
.law-main-title {
  font-family:var(--font-serif); font-size:clamp(1.6rem,3vw,2.2rem);
  font-weight:700; margin-bottom:8px;
}
.law-info-meta { font-size:13px; color:var(--text-muted); margin-top:6px; }

.law-hdr { font-family:var(--font-serif); font-weight:900; color:var(--accent); }
[data-theme='light'] .law-hdr { color:#8b6914; }
.law-hdr.part { font-size:2.2em; text-align:center; margin:80px 0 40px; }
.law-hdr.chapter { font-size:1.7em; margin:50px 0 24px; }
.law-hdr.section { font-size:1.35em; margin:32px 0 14px; }
.law-hdr.subsection { font-size:1.15em; margin:22px 0 10px; color:var(--text); font-weight:700; }

.ls.law-preamble .lt {
  font-family:var(--font-serif); font-size:1.1em; font-weight:700;
  color:var(--accent); border-bottom:1px solid var(--accent);
  padding-bottom:8px; margin-bottom:12px; letter-spacing:normal; text-transform:none;
}
.preamble-text { font-style:italic; line-height:2.2; opacity:.9; }

.ls.law-article .lt {
  font-family:var(--font-serif); font-size:1.1em; font-weight:700;
  color:var(--accent); border-bottom:1px solid var(--border);
  padding-bottom:8px; margin-bottom:12px; letter-spacing:normal; text-transform:none;
}
[data-theme='light'] .ls.law-article .lt { color:#8b6914; border-bottom-color:#c8a052; }

.ln { font-family:var(--font-mono); font-size:11px; color:var(--text-dim); margin-right:4px; }
.art-title {
  font-family:var(--font-serif); font-size:1.05em; color:var(--accent);
  font-weight:600; margin-left:6px;
}
.art-body, .law-para, .law-item, .law-subitem {
  font-family:var(--font-serif); font-size:15px; line-height:2; color:var(--text);
}
.law-para { margin:6px 0; }
.law-item { margin:4px 0 4px 20px; }
.law-subitem { margin:3px 0 3px 36px; font-size:14px; color:var(--text-muted); }
.art-pt { color:var(--accent); font-weight:bold; margin-right:6px; font-size:13px; }
[data-theme='light'] .art-pt { color:#8b6914; }

/* ── 용어 밑줄 ── */
.term {
  border-bottom:1.5px dashed var(--accent); cursor:pointer; transition:color .15s;
}
.term:hover { color:var(--accent); }

/* [FIX] 타 문제: 용어 끄기 클래스 */
.term-hidden {
  border-bottom:none !important; cursor:default !important; color:inherit !important;
}

/* ── 검색 하이라이트 ── */
mark.sh {
  background:rgba(200,169,110,.3); color:var(--text); border-radius:2px;
}
mark.sh.cur { background:var(--accent); color:#0e0f14; font-weight:600; }

/* ── 사용자 하이라이트 ── */
.uhl { background:rgba(200,169,110,.25); border-radius:2px; }

/* ════════════════════════════════════════════════════════════════
   우측 패널
   ════════════════════════════════════════════════════════════════ */
.panel-tabs { display:flex; border-bottom:1px solid var(--border); }
.ptab {
  flex:1; padding:10px; text-align:center; font-size:12px; cursor:pointer;
  color:var(--text-muted); border-bottom:2px solid transparent; transition:all .15s;
}
.ptab:hover { color:var(--text); }
.ptab.active { color:var(--accent); border-bottom-color:var(--accent); }

.pc { padding:14px; flex:1; overflow-y:auto; }
.hint { font-size:12px; color:var(--text-muted); line-height:1.7; }
.rst { font-size:10px; text-transform:uppercase; letter-spacing:.06em; color:var(--text-dim); margin:12px 0 6px; }

.tcrd {
  padding:10px; border:1px solid var(--border); border-radius:var(--radius);
  margin-bottom:6px; cursor:pointer; transition:border-color .15s;
}
.tcrd:hover { border-color:var(--accent); }
.tcrd.selected { border-color:var(--accent); background:var(--accent-glow); }
.tw { font-size:14px; font-weight:700; color:var(--accent); margin-bottom:2px; }
.th { font-size:11px; color:var(--text-dim); font-family:var(--font-mono); margin-bottom:4px; }
.td { font-size:12px; color:var(--text-muted); line-height:1.6; }
.ellipsis { overflow:hidden; white-space:nowrap; text-overflow:ellipsis; }

.rcrd {
  padding:10px; border:1px solid var(--border); border-radius:var(--radius);
  margin-bottom:6px; cursor:pointer; transition:border-color .15s;
}
.rcrd:hover { border-color:var(--accent); }
.rtype { font-size:10px; color:var(--text-dim); font-family:var(--font-mono); }
.rnum { font-size:13px; font-weight:600; margin:2px 0; }
.rdate { font-size:11px; color:var(--text-muted); font-family:var(--font-mono); }
